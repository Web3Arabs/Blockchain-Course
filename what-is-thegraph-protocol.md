# ما هو بروتوكول TheGraph؟

يعد بروتوكول Graph مكونًا رئيسيًا في Web3، الويب اللامركزي. يوفر بروتوكول فهرسة مفتوح المصدر للاستعلام عن شبكات مثل Ethereum و IPFS. يتيح بروتوكول Graph للمطورين الوصول بسهولة إلى البيانات المخزنة على شبكات blockchain بطريقة آمنة وفعالة.

## ما هو graph؟

هو بروتوكول لامركزي للفهرسة والإستعلام عن البيانات من سلاسل الكتل، بدءاً بسلسلة Ethereum. إنَّه يجعل من الممكن الإستعلام عن البيانات التي يصعب الإستعلام عنها بشكلٍ مباشر.

المشاريع ذات العقود الذكية المعقدة مثل المقايضة الأحادية (<a href="https://uniswap.org/" target="_blank">Uniswap</a>) ومبادرات الرموز غير القابلة للإستبدال مثل بيانات تخزين نادي يخوت القرد الضجر (<a href="https://boredapeyachtclub.com/" target="_blank">بايك</a>) على سلسلة Ethereum، ممّا يجعلها من الصعوبة بمكان أن تقرأ شيئاً عدا البيانات البسيطة بشكلٍ مباشر من سلسلة الكتل.

في حالة نادي يخوت القرد الضجر، بإمكاننا إجراء عمليات القراءة البسيطة من خلال <a href="https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code" target="_blank">العقد</a> مثل الحصول على مالك قردٍ معين، أو الحصول على معرف الموارد لمحتوى قردٍ بناءً على هويته، أو إجمالي الكمية؛ كون عمليات القراءة هذه مبرمجةص بشكلٍ مباشرٍ في العقد الذكي، لكن إستعلامات وعمليات العالم الواقعي الأكثر تقدماً مثل تجميع البيانات، والبحث، والعلاقات والتصفية غير العادية؛ غير ممكنة. على سبيل المثال، إذا أردنا أن نستعلم عن قردٍ مملوك من خلال عنوانٍ محدد، وتصفية النتيجة بإحدى صفات القرد، فلن نكون قادرين على الحصول على تلك المعلومة من خلال التفاعل بشكلٍ مباشر مع العقد نفسه. 

للحصول على هذه البيانات، سيتحتم عليك معالجة كل حالة تحويل تم إصدارها على الإطلاق، وقراءة البيانات الوصفية من نظام الملفات العابر للكواكب (آي بي اف اس) باستخدام هوية الرمز و رمز تجزئة آي بي اف اس، وم ثمّ تجميعها. حتى من أجل هذا النوع من الأسئلة البسيطة نسبياً، فسيتتطلب الأمر ساعاتٍ أو حتى أياماً لتطبيقٍ لامركزي يعمل في متصفحٍ للحصولِ على إجابة.

يمكنك أيضاً بناء الملقم الخاص بك، ومعالجة المعاملات هناك، وحفظهم في قاعدة بيانات، وبناء نقطة نهايةٍ لواجهة برمجة التطبيق (الواجهة) فوق كل ما سبق؛ من أجل اللإستعلام عن البيانات. إلاّ أنّ هذا الخيار يعد كثيف الموارد، ويحتاج صيانةً، ويمثل نقطة واحدة تؤدي للفشل، وكذلك يكسر خصائص حمايةٍ مهمة مطلوبة من أجل تحقيق اللامركزية.

### فهرسة بيانات سلسلة الكتل هو حقاً صعبٌ جداً للغاية.

خصائص سلسلة الكتل مثل التأكيد النهائي، أو إعادة تنظيم السلسلة، أو الكتل غير المقيدة تعقد المعالجة أكثر، وتجعلها ليس وحسب مستهلكةً للوقت إنّما صعبةً من ناحية الفهم الصحيح لنتائج البيانات المستخلصة من سلسلة الكتل.

يقوم ال graph بحل هذا باستخدام بروتوكولٍ لامركزي يقوم بفهرسة وتمكين المؤدي والإستعلام بكفاءةٍ عالية عن بيانات سلسلة الكتل. هذه الواجهات ("بيانات فرعية" مفهرسة) يمكن عندئذٍ الإستعلام عنها من خلال واجهةٍ قياسية تستخدم لغة استعلام ال graph. اليوم، هناك خدمة مستضافة وكذلك بروتوكولٌ لامركزي بنفس القدرات. كلاهما مدعوم من خلال تنفيذٍ مفتوح المصدر لنقطة تشغيلٍ graph.

## كيف يعمل graph؟

يقوم بروتوكول ال graph بتعلم ماذا يفهرس وكيف يفهرس بيانات إيثيريوم بناءً على أوصاف graphٍ فرعي، تُعرَف ببيان ال graph الفرعي أو لائحة ال graph الفرعي. وصف ال graph الفرعي يُحدِّد العقود الذكية ذات الأهمية للgraph الفرعي، والأحداث التي ينبغي الانتباه لها في هذه العقود، و كيفية ربط بيانات تلك الأحداث بالبيانات التي سوف يقوم ال graph بتخزينها في قاعدة بياناته.

بمجرد قيامك بكتابة لائحة graphٍ فرعي، تقوم باستخدام واجهة سطر الأوامر للgraph لتخزين التعريف في (آي بي اف اس) وإخطار المفهرس ليبدأ فهرسة البيانات لهذا ال graph الفرعي.

يعطي هذا المخطط تفاصيل أكثر حول مسار تدفق البيانات بمجرد أن يتم نشر بيان graphٍ فرعي، وكيفية التعاطي مع معاملات الإيثيريوم:

<img src="https://www.web3arabs.com/courses/work-graph.jpg"/>

### يتبع مسار البيانات هذه الخطوات:

1. يقوم تطبيقٌ لامركزي بإضافة بياناتٍ لسلسلة الإيثيريوم من خلال إجراء عملية على عقدٍ ذكي.

2. يقوم العقد الذكي بإرسال حدثٍ أو أكثر أثناء معالجته للعملية.

3. تقوم نقطة تشغيل للgraph باستمرار بمسح سلسلة الإيثيريوم بحثاً عن أي كتلٍ جديدة والبيانات من أجل قرافِك الفرعي التي يمكن أن تحتوي عليها.

4. تعثر نقطة تشغيلٍ للقراف على أحداثٍ في سلسلة الإيثيريوم  من أجل قرافك الفرعي في هذه الكتل وتقوم بتشغيل معالجات ربط البيانات التي قمت بتزويدها سابقاً. ربط البيانات هو نموذج تجميع شبكي يقوم بإنشاء أو تحديث وحدات البيانات التي تخزنها نقطة تشغيل ال graph استجابةً لأحداث سلسلة الإيثيريوم.

5. يقوم التطبيق اللامركزي بالإستعلام من نقطة تشغيل ال graph عن بيانات مفهرسة من سلسلة الكتل، باستخدام نقطة نهاية للغة استعلام ال graph الخاصة بنقطة التشغيل. بدورها تقوم نقطة تشغيل ال graph بترجمة استعلامات لغة استعلام ال graph إلى استعلاماتٍ من أجل مستودع بياناتها الداخلي بغرض جلب هذه البيانات، مستفيدةً من إمكانيات مستودعها على الفهرسة. يعرض التطبيق اللامركزي هذه البيانات في واجهة استخدامٍ غنية للمستخدم النهائي، والتي يستخدمونها لإصدار عملياتٍ جديدةٍ على سلسلة الإيثيريوم. تتكرر الدورة من جديد.

كما هو الحال دائمًا، إذا كانت لديك أي أسئلة أو شعرت بالتعثر أو أردت فقط أن تقول مرحبًا، فقم بالإنضمام على <a href="https://discord.gg/ykgUvqMc4Q" target="_blank">Discord</a> وسنكون أكثر من سعداء لمساعدتك!
